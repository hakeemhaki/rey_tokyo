!function(e){"use strict";var t=function(){this.editor_params="undefined"!=typeof reyElementorEditorParams?reyElementorEditorParams:{},this.init=function(){"undefined"!=typeof elementor&&(this.runCallbacks(),this.addLinks(),this.addQuickMenu(),this.modifyLibraryElement(),this.addCustomIcons(),this.events())},this.addCustomIcons=function(){e.each([{template:"#tmpl-elementor-navigator__elements",search:'<i class="{{{ icon }}}"></i>'},{template:"#tmpl-elementor-element-library-element",search:'<i class="{{ icon }}" aria-hidden="true"></i>'}],(function(t,n){var o=e(n.template);if(o.length){var i=o.text(),s="";s+='<# var cssClass = "rey-editor-icons"; #>',s+="<# if ( icon.indexOf(cssClass) !== -1 ) { #>",s+='<# var iconName = reyElementorEditorParams.elements_icons_sprite_path + "#"; #>',s+='<# iconName += icon.replace(cssClass + " --", ""); #>',s+='<svg class="{{ cssClass }}" aria-hidden="true" role="img"><use href="{{iconName}}" xlink:href="{{iconName}}"></use> </svg>',s+="<# } else { #>",s+=n.search,s+="<# } #>",i=i.replace(n.search,s),o.text(i)}}))},this.events=function(){e(document).on("change",".js-insertSnippetToEditor",this.doInsertSnippet),e(document).on("click",".js-insertToEditor",this.doInsertSnippet),elementor.hooks.addAction("panel/open_editor/column",this.update_column_width),elementor.hooks.addAction("panel/open_editor/section",this.handle_flex_wrap),elementor.channels.editor.on("rey:editor:hide_header",this.handle_hide_header),elementor.channels.editor.on("rey:editor:hide_gs",this.handle_hide_gs),elementor.channels.editor.on("rey:editor:set_wc_page",this.handle_set_wc_page),elementor.channels.editor.on("rey:editor:set_opt",this.handle_set_opt),elementor.channels.editor.on("rey:editor:apply_preview",this.handle_apply_preview),elementor.hooks.addFilter("editor/style/styleText",this.section_custom_css),elementor.channels.editor.on("section:activated",this.section_custom_css__handle_label)},this.runCallbacks=function(){if(void 0!==elementor.settings.page){elementor.settings.page.addChangeCallback("rey_stretch_page",(function(t){var n=e(".rey-siteContainer",elementor.$previewContents),o="rey-stretchPage";t==o?n.addClass(o):n.removeClass(o)})),elementor.settings.page.addChangeCallback("header_layout_type",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){elementor.getPanelView().setPage("page_settings")}))}})})),elementor.settings.page.addChangeCallback("header_position",(function(t){var n=e(".rey-siteHeader",elementor.$previewContents);e(".elementor-control-header_position .elementor-control-content");n.removeClass((function(e,t){return(t.match(/(^|\s)header-pos--\S+/g)||[]).join(" ")}));var o=elementor.settings.page.getSettings();""==t?n.addClass("header-pos--"+o.settings.header_position):n.addClass("header-pos--"+t)})),elementor.settings.page.addChangeCallback("footer_layout_type",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){elementor.getPanelView().setPage("page_settings")}))}})})),elementor.settings.page.addChangeCallback("gs_type",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview()}})})),elementor.settings.page.addChangeCallback("rey_custom_logo",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){elementor.getPanelView().setPage("page_settings")}))}})}));var t=function(e){$e.run("document/save/update").then((function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){$e.route("panel/page-settings/settings")}))}))};elementor.settings.page.addChangeCallback("rey_templates_type",t),elementor.settings.page.addChangeCallback("rey_templates_grid",t)}},this.addLinks=function(){void 0!==elementor.config.rey&&void 0!==elementor.config.rey.global_links&&e.each(elementor.config.rey.global_links,(function(e,t){void 0!==t.show_in_el_menu&&!1===t.show_in_el_menu||elementor.modules.layouts.panel.pages.menu.Menu.addItem({icon:t.icon,title:t.title,link:t.link,type:"link",newTab:!0},"settings")}))},this.addQuickMenu=function(){if(void 0!==elementor.config.rey){var t=e("#tmpl-elementor-panel-footer-content"),n='<div id="elementor-panel-footer-navigator',o=t.text(),i="";i+='<div id="elementor-panel-footer-rey" class="elementor-panel-footer-tool elementor-toggle-state tooltip-target" data-tooltip="'+reyElementorEditorParams.rey_title+'"><span id="elementor-panel-footer-rey-label"><img src="'+reyElementorEditorParams.rey_icon+'" /><span class="elementor-screen-only">'+reyElementorEditorParams.rey_title+"</span></span>",i+='<div class="elementor-panel-footer-sub-menu-wrapper"><div class="elementor-panel-footer-sub-menu">',void 0!==elementor.config.rey.global_links&&e.each(elementor.config.rey.global_links,(function(e,t){var n=void 0!==t.class?t.class:"";i+='<a href="'+t.link+'" target="_blank" class="elementor-panel-footer-sub-menu-item '+n+'"><i class="elementor-icon '+t.icon+'" aria-hidden="true"></i><span class="elementor-title">'+t.title+"</span></a>"})),i+="</div></div>",i+="</div>",i+=n,o=o.replace(n,i),t.text(o)}},this.modifyLibraryElement=function(){var t=e("#tmpl-elementor-element-library-element"),n=t.text(),o='<div class="elementor-element"';n=n.replace(o,'<div class="elementor-element" data-widget-type="{{ widgetType }}"'),t.text(n)},this.doInsertSnippet=function(t){t.preventDefault();var n=e(".ace_editor",e(this).closest(".elementor-control"));if(n.length&&void 0!==n[0].env.editor){var o=n[0].env.editor,i=o.session.getValue();if(e(this).is("span"))var s=e(this).text();else if(e(this).is("select"))s=e(this).val();o.focus(),o.navigateFileEnd(),i&&(s="\n"+s),o.session.insert(o.getCursorPosition(),s)}},this.update_column_width=function(e,t,n){var o=t.get("settings"),i=n._parent.model.get("settings").get("rey_flex_wrap");o.set("section_rey_flex_wrap",i)},this.handle_wc_checkout=function(e,t){void 0!==t.model.get("settings").changed.layout&&elementor.reloadPreview()},this.handle_flex_wrap=function(t,n,o){n.get("settings").on("change",(function(t){if(void 0!==t.changed.rey_flex_wrap){var i=n.get("elements");i.length>0&&e.each(i.models,(function(n,i){var s=i.get("settings");if(s.set("section_rey_flex_wrap",t.changed.rey_flex_wrap),""!=t.changed.rey_flex_wrap&&""==s.get("rey_flex_wrap_inline_size")){s.set("rey_flex_wrap_inline_size",100);var a=e("> .elementor-container > .elementor-column.elementor-top-column",o.$el);reyElementorEditorParams.optimized_dom||(a=e("> .elementor-container > .elementor-row > .elementor-column.elementor-top-column",o.$el)),a.each((function(t,n){e(n).attr("data-col",100)}))}}))}}))},this.handle_hide_header=function(t){e("button",t.$el).toggleClass("--active"),e(".rey-siteHeader",elementor.$previewContents).toggleClass("rey--disable-header")},this.handle_hide_gs=function(t){e("button",t.$el).toggleClass("--active"),e("body",elementor.$previewContents).toggleClass("rey--disable-gs")},this.handle_set_wc_page=function(e){var t=e.$el,n=e.ui.button;t.css("pointer-events","none"),n.css("opacity","0.5"),elementorCommon.ajax.load({action:"rey_set_wc_page",data:{page:e.model.attributes.default},success:function(e){e&&t.css("display","none")}})},this.handle_set_opt=function(e){var t=e.$el,n=e.ui.button;t.css("pointer-events","none"),n.css("opacity","0.5"),elementorCommon.ajax.load({action:"rey_set_opt",data:{opt:e.model.attributes.default},success:function(e){t.css("pointer-events",""),n.css("opacity",""),elementor.reloadPreview()}})},this.handle_apply_preview=function(e){$e.run("document/save/update").then((function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){$e.route("panel/page-settings/settings")}))}))},this.replace_font_list_names=function(){var t=e("#tmpl-elementor-control-font-content"),n=t.text(),o=new RegExp('<option value="{{ fontName }}">{{{ fontName }}}</option>',"g");n=n.replace(o,'<# var typo_names = reyElementorEditorParams.rey_typography;  var fontNameModified = fontName;  if( fontName === "var(--primary-ff)" ) { fontNameModified = typo_names.primary; }  else if( fontName === "var(--secondary-ff)" ) { fontNameModified = typo_names.secondary; } #><option value="{{ fontName }}">{{{ fontNameModified.replace("__", "") }}}</option>'),t.text(n)},this.section_custom_css=function(e,t){if(!t)return e;if(void 0===t)return e;if(t&&(t.hasOwnProperty("getElementType")&&"section"!==t.getElementType()||t.hasOwnProperty("getEditModel")&&"section"!==t.getEditModel().get("elType")))return e;var n=t.getEditModel().get("settings").get("rey_custom_css");return n&&(e+=n.replace(/SECTION-ID/g,"."+t.getElementUniqueID())),e},this.section_custom_css__handle_label=function(t,n){var o=n.getOption("editedElementView").getEditModel();if("section"===o.get("elType")){var i=function(t,n){var o=t.get("rey_custom_css"),i=e(".elementor-control-section_rey_custom_CSS .elementor-panel-heading-title .rey-hasStylesNotice",n);""!==o?i.addClass("--visible"):i.removeClass("--visible")},s=o.get("settings");i(s,n.$el),s.on("change",(function(){i(s,n.$el)}))}},this.init()};e(window).on("elementor:init",(function(){new t}));var n=elementor.modules.controls.Select2.extend({cache:null,isTitlesReceived:!1,getSelect2Placeholder:function(){return{id:"",text:this.model.get("placeholder")}},getSelect2DefaultOptions:function(){var t=this;return e.extend(elementor.modules.controls.Select2.prototype.getSelect2DefaultOptions.apply(this,arguments),{ajax:{transport:function(e,n,o){return elementorCommon.ajax.addRequest("rey_query_control_filter_autocomplete",{data:{q:e.data.q,query_args:t.model.get("query_args")},success:n,error:o})},data:function(e){return{q:e.term}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1})},getValueTitles:function(){var e=this,t=this.getControlValue(),n=this.model.get("query_args"),o=n.type;t&&n&&(_.isArray(t)||(t=[t]),elementorCommon.ajax.load({action:"rey_query_control_value_titles",unique_id:e.cid+o,data:{query_args:n,values:t},success:function(t){e.isTitlesReceived=!0,e.model.set("options",t),void 0!==e.ui.select&&e.render()},before:function(){e.addSpinner()}}))},addSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner">&nbsp;<i class="fa fa-spinner fa-spin"></i>&nbsp;</span>')},onReady:function(){this.ui.select.select2(this.getSelect2Options()),this.isTitlesReceived||this.getValueTitles()}});elementor.addControlView("rey-query",n)}(jQuery);