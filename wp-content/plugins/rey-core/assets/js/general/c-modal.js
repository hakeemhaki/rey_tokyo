!function(t){"use strict";t(document).one("reycore/init",(function(e,i){var o;(o=i).reyModal={activeClass:"--active",$body:t("body"),$instance:[],init:function(e){return this.options=t.extend({removeLoadingOnOpen:!0,width:500,height:"",zIndex:!1,title:"",content:"",wrapperClass:"",contentClass:"",closeInside:!0,onInit:function(){},onOpen:function(){},onClose:function(){},openOnDemand:!1,iframe:"",videoTime:"",ratio:"",id:null},e),this.createModal(),this.events(),this.handleClose(),this.options.openOnDemand||this.open(),this.options.onInit(this),this},createModal:function(){if(this.$instance=t("#"+this.options.id+"-modal",this.$body),this.options.iframe&&(this.options.content=this.getIframe(),this.options.wrapperClass+="--iframe",this.options.closeInside=!1),this.options.id&&this.$instance.length)this.$modal=this.$instance;else{var e=wp.template("reycore-modal-tpl");this.$modal=t(e(this.options)).appendTo(this.$body),this.options.id&&this.$modal.attr("id",this.options.id+"-modal")}this.options.zIndex&&this.$modal.css("z-index",this.options.zIndex),this.$modalInner=t(".rey-modalInner",this.$modal).css({maxWidth:this.options.width,height:this.options.height,minHeight:this.options.minHeight}),this.$content=t(".rey-modalContent",this.$modal),this.$loader=t(".rey-modalLoader",this.$modal),this.$closeBtn=t(".rey-modalClose",this.$modal),this.$instance.length||(this.$newContent=this.$content.html(this.options.content),this.$newContent.children().removeClass("--hidden"))},events:function(){var e=this;t(".rey-modalOverlay, .rey-modalClose, [data-close-modal]",this.$modal).on("click",(function(t){t.preventDefault(),e.close()})),t(document).on("keyup",(function(t){27==t.keyCode&&e.close()})),t(window).on("resize",t.reyHelpers.debounce((function(){e.handleClosePos()}),500))},handleClose:function(){var t=this;this.options.closeInside||(this.$modal.addClass("--closeOutside"),this.$closeOutsideBtn=this.$closeBtn.clone().appendTo(this.$modal),this.$closeOutsideBtn.on("click",(function(e){e.preventDefault(),t.close()})))},handleClosePos:function(){this.options.closeInside||this.$closeOutsideBtn.css({left:t(window).width()/2+this.$modalInner.outerWidth()/2+30,top:t(window).height()/2-this.$modalInner.outerHeight()/2-30})},open:function(){var t=this;this.$body.css("overflow","hidden"),this.$modal.css("display","flex"),setTimeout((function(){t.handleClosePos(),t.$modal.addClass(t.activeClass),t.options.onOpen(t),t.options.removeLoadingOnOpen&&t.$loader.fadeOut("fast")}),100)},close:function(){var e=this;this.$modal.removeClass(this.activeClass),this.$body.css("overflow",""),this.options.iframe&&t("iframe",this.$modal).attr("src",""),setTimeout((function(){e.$modal.css("display",""),e.options.onClose(e)}),100)},closeAll:function(){var e=this;t(".rey-modal").each((function(i,o){t(o).removeClass(e.activeClass),e.$body.css("overflow",""),setTimeout((function(){t(o).css("display","")}),100)}))},getIframe:function(){var e=this,i=this.options.iframe;t.each({youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1&rel=0",time:"&t="},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1",time:"#t="},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}},(function(){if(i.indexOf(this.index)>-1)return this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i),e.options.videoTime&&this.time&&(i+=this.time+parseFloat(e.options.videoTime))),i=this.src.replace("%id%",i),!1}));var o="";return this.options.ratio&&(o="--custom-video-ratio:"+this.options.ratio+"%"),'<div class="embed-responsive embed-responsive-16by9" style="'+o+'"><iframe class="rey-modalIframe" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" src="'+i+'" frameborder="0" allowfullscreen></iframe></div>'}},t(document).on("click","[data-reymodal]",(function(e){var i=JSON.parse(t(this).attr("data-reymodal")||"{}");!t.isEmptyObject(i)&&"undefined"!==i.content&&i.content&&(i.content=t(i.content)),Object.create(o.reyModal).init(i)})),t(document).on("click",'a[data-rey-inline-modal][href^="https://"]:not([href="#"])',(function(e){var i=t(this).attr("href"),s={};-1!==i.indexOf("youtube.com")?s.iframe=i:-1!==i.indexOf("youtu.be")&&(s.iframe=i.replace("youtu.be/","youtube.com/watch?v=")),t.isEmptyObject(s)||(e.preventDefault(),s.width=750,Object.create(o.reyModal).init(s))}))}))}(jQuery);