!function(e){"use strict";e.reyVideosHelper=function(t){var a={};return void 0!==t.containers&&""!=t.containers||console.error("error"),a.config=e.extend({containers:"",lazyLoad:!0},t||"{}"),a.htmlVideosLoaded=!1,a.videos={youtube:{},hosted:{}},a.$players={youtube:{},hosted:{}},a.currentIndex=0,a.loadYoutubeAPI=function(){!1===e.reyHelpers.youTubeApiLoaded&&(e("script:first").before(e("<script>",{src:"https://www.youtube.com/iframe_api"})),e.reyHelpers.youTubeApiLoaded=!0)},a.calcYTVideosSize=function(e){var t=e.parent().outerWidth(),a=e.parent().outerHeight(),o="16:9".split(":"),i=o[0]/o[1],r=t/a>i;return{width:r?t:a*i,height:r?t/i:a}},a.changeYTVideoSize=function(e){var t=this.calcYTVideosSize(e);e.width(t.width).height(t.height)},a.init=function(){var t=this;this.config.containers.each((function(a,o){e(".rey-hostedVideo[data-video-params]",e(o)).each((function(a,i){var r=e(i);if(e.reyHelpers.is_desktop||!r.hasClass("elementor-hidden-phone")){var d=e(o).index(),n=JSON.parse(r.attr("data-video-params")||"{}"),s=void 0!==n.src&&n.src;s&&e.reyHelpers.matchYoutubeUrl(s)||(t.$players.hosted[d]={el:r,playerVars:n})}})),e(".rey-youtubeVideo[data-video-params]",e(o)).each((function(a,i){var r=e(i);if(e.reyHelpers.is_desktop||!r.hasClass("elementor-hidden-phone")){var d=e(o).index(),n=r.attr("data-video-id")||"";if(n){if(e.reyHelpers.isValidURL(n)){if(!e.reyHelpers.matchYoutubeUrl(n))return;n=e.reyHelpers.matchYoutubeUrl(n)}t.$players.youtube[d]={el:r.children()[0],videoId:n,playerVars:JSON.parse(r.attr("data-video-params")||"{}")};var s=r.next(".rey-youtubePreview").children("img");s.length&&120===s[0].naturalWidth&&s.attr("src",s.attr("data-default-src"))}}}))}));var a=!e.isEmptyObject(this.$players.youtube),o=!e.isEmptyObject(this.$players.hosted);(o||a)&&(o&&(this.config.lazyLoad||this.add_html5_videos()),a&&(this.config.lazyLoad||this.add_youtube_videos()),this.events())},a.events=function(){var t=this;e(window).on("resize",e.reyHelpers.debounce((function(){e.each(t.videos.youtube,(function(a,o){void 0!==o&&void 0!==o.a&&o.a&&t.changeYTVideoSize(e(o.a))}))}),600))},a.add_youtube_videos=function(){var t=this;this.loadYoutubeAPI(),"undefined"==typeof YT||"object"==typeof YT&&!YT.loaded?setTimeout((function(){t.add_youtube_videos()}),350):e.each(this.$players.youtube,(function(a,o){void 0!==o&&(t.videos.youtube[a]=new YT.Player(o.el,{videoId:o.videoId,playerVars:o.playerVars,events:{onStateChange:function(t){e(t.target.getIframe().parentNode).attr("data-player-state",t.data)},onReady:function(o){t.changeYTVideoSize(e(o.target.getIframe())),t.config.lazyLoad?"object"==typeof t.currentIndex&&-1!==t.currentIndex.indexOf(parseInt(a))||parseInt(a)==t.currentIndex?o.target.playVideo():o.target.pauseVideo():o.target.playVideo(),setInterval((function(){o.target.getCurrentTime()>=o.target.getDuration()-.5&&o.target.seekTo(0)}),250)}}}))}))},a.add_html5_videos=function(){var t=this;e.each(t.$players.hosted,(function(a,o){void 0!==o&&e("<video />").attr(o.playerVars).prop("muted",!0).appendTo(o.el).on("canplay",(function(e){t.config.lazyLoad?"object"==typeof t.currentIndex&&-1!==t.currentIndex.indexOf(parseInt(a))?e.target.play():parseInt(a)==t.currentIndex?e.currentTarget.play():e.currentTarget.pause():e.currentTarget.play(),o.el.attr("data-player-state",1),t.videos.hosted[a]=e.currentTarget}))})),t.htmlVideosLoaded=!0},a.changeState=function(t,o){a.currentIndex=t;var i=this,r={hosted:{play:"play",pause:"pause",method:"hostedChangeState"},youtube:{play:"playVideo",pause:"pauseVideo",method:"youtubeChangeState"}},d=function(t){e.each(r,(function(e,a){void 0!==i.$players[e][t]&&i[a.method](t,a[o])}))};"object"==typeof t?e.each(t,(function(e,t){d(t)})):d(t)},a.hostedChangeState=function(e,t){this.htmlVideosLoaded||!this.config.lazyLoad?void 0!==this.videos.hosted[e]&&this.videos.hosted[e][t]():this.add_html5_videos()},a.youtubeChangeState=function(t,a){var o=!e.isEmptyObject(this.videos.youtube)&&void 0!==this.videos.youtube[t];!this.config.lazyLoad||o?o&&void 0!==a&&this.videos.youtube[t].hasOwnProperty(a)&&this.videos.youtube[t][a]():this.add_youtube_videos()},a.pauseAll=function(){},a}}(jQuery);