!function(e){"use strict";var s={$btn:e(".js-rey-headerAccount"),$panel:e(".js-rey-accountPanel"),$reyTheme:e.reyTheme,isOpen:!1,$buttonInUse:!1,wishlist:!1,$body:e("body"),closeTimer:null,init:function(){this.$panel&&e(".rey-accountPanel",this.$panel).children(":not(.js-rey-sidePanel-close)").length&&(this.layout=this.$panel.hasClass("--layout-offcanvas")?"offcanvas":"drop",this.close_on_scroll=this.$panel.hasClass("--close-on-scroll"),this.makeWishlist(),this.events())},events:function(){var s=this;this.$btn.on("click",(function(t){t.preventDefault();var o=e(this);e.reyHelpers.is_global_section_mode||(s.$buttonInUse=o,s.isOpen?s.close():s.open())})),e(".rey-form-row.rey-form-row--text").on("change keyup paste",".rey-input",(function(s){var t=e(this);""!==t.val()?t.closest(".rey-form-row").addClass("--has-value"):t.closest(".rey-form-row").removeClass("--has-value")})),e(document).on("scroll",(function(){s.isOpen&&e.reyHelpers.is_desktop&&s.close_on_scroll&&s.close(!0)}))},open:function(){var s=this;this.isOpen=!0,e(document).trigger("rey/close_panels",["account-panel"]),e.reyHelpers.overlay("header","open"),"drop"===this.layout&&void 0===e.reyHelpers.params.account_panel_custom_position&&this.doPosition(),clearTimeout(this.closeTimer),this.$panel.show(0,(function(){s.$body.addClass("header-account--active"),"offcanvas"===s.layout&&s.$body.addClass("--side-panel-active"),s.wishlist&&s.wishlist.refresh()}))},close:function(s){var t=this;this.isOpen=!1,this.$panel.length&&(this.$body.removeClass("header-account--active --side-panel-active"),(s||"drop"===this.layout)&&e.reyHelpers.overlay("header","close"),"offcanvas"===this.layout&&e.reyHelpers.doScroll.enable(),this.closeTimer=setTimeout((function(){t.$panel.hide(0)}),400))},doPosition:function(){var s=this,t=this.$buttonInUse,o=function(){if(!1!==t){var o=t[0].getBoundingClientRect(),i=e(window).width(),n=o.top+t.height(),l=o.left,a=i-(o.left+t.width());s.$panel.css("top",n+"px"),e.reyHelpers.is_mobile?s.$panel.css({left:"",right:""}):l<i/2?s.$panel.addClass("--from-left").css({left:l+"px",right:""}):s.$panel.addClass("--from-right").css({right:a+"px",left:""})}};o(),e(window).on("resize",e.reyHelpers.debounce(o,500))},makeWishlist:function(){if(this.$wishlist_panel=e(".rey-wishlistPanel",this.$panel),this.$wishlist_panel.length){if(void 0===e.fn.rey_wishlist_panel)return;this.wishlist=this.$wishlist_panel.rey_wishlist_panel({scroll:"drop"===this.layout,customHeight:"drop"===this.layout})}}};e(document).on("reycore/woocommerce/init",(function(e,t){s.init()})),e(document).on("rey/close_panels",(function(e,t){"account-panel"!==t&&s.close()}))}(jQuery);