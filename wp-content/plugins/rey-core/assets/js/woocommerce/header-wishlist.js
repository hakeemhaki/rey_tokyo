!function(s){"use strict";var t=function(t,i){this.wishlist_panel=s(t),this.has_content=!1,this.init=function(){this.wishlist_panel.length&&(this.options=s.extend({scroll:!0,customHeight:!0},i),this.params=s.reyHelpers.params,this.wishlist_container=this.wishlist_panel.parent(),this.isProductGrid=this.wishlist_container.hasClass("--prod-grid"),this.events())},this.events=function(){var t=this;s(document).on("wc_fragments_loaded.wishlist wc_fragments_refreshed.wishlist reycore/woocommerce/wishlist/added_product",(function(){t.has_content=!1,t.wishlist_container.removeClass("--loaded")})),s(document).on("reycore/woocommerce/wishlist/get_saved_products",(function(s,i){t.wishlist_panel.addClass("--loading").empty(),t.display(i),t.has_content=!0})),s(document).on("reycore/woocommerce/wishlist_account/remove",(function(i){s(".rey-wishlistItem",t.wishlist_panel).length||t.show_empty()}))},this.refresh=function(t){var i=this;this.wishlist_panel.length&&!i.has_content&&this.params.ajaxurl&&this.params.ajax_nonce&&(this.wishlist_panel.addClass("--loading").empty(),s.ajax({url:this.params.ajaxurl,dataType:"json",cache:!1,data:{action:"get_wishlist_data",security:s.reyHelpers.params.ajax_nonce},success:function(t){if(t&&t.success){var e=t.data;s(document).trigger("reycore/woocommerce/wishlist/get_data",[i,e]),e.length?(i.display(e),i.has_content=!0):i.show_empty()}},error:function(s,t,i){console.error(s),console.error(t),console.error(i)}}))},this.refreshScroll=function(){var s=this.wishlist_panel;this.options.scroll&&"undefined"!=typeof SimpleScrollbar&&s.length&&SimpleScrollbar.initEl(s[0])},this.display=function(t){var i=this;if(i.wishlist_panel.removeClass("--loading"),t.length>0){this.wishlist_container.removeClass("--empty"),this.isProductGrid&&(t.length>=2?this.wishlist_container.addClass("--is-large"):this.wishlist_container.removeClass("--is-large"));var e=wp.template("reyWishlistItem")({num:t.length,ob:t,grid:i.isProductGrid});s(e).appendTo(i.wishlist_panel),setTimeout((function(){if(i.options.customHeight){var e=Math.max(s(".rey-wishlistItem",i.wishlist_panel).eq(0).height(),275);i.isProductGrid&&i.wishlist_container.hasClass("--is-large")&&(e=Math.max(s(".rey-wishlistItem",i.wishlist_panel).eq(0).height(),s(".rey-wishlistItem",i.wishlist_panel).eq(1).height(),300)),i.wishlist_container.addClass("--loaded").css("height",e+"px"),t.length>2&&i.refreshScroll()}else i.wishlist_container.addClass("--loaded")}),500)}},this.show_empty=function(){this.wishlist_panel.removeClass("--loading"),this.wishlist_container.addClass("--empty"),this.params.wishlist_empty_text&&s("<p>"+this.params.wishlist_empty_text+"</p>").appendTo(this.wishlist_panel)},this.init()};s.fn.rey_wishlist_panel=function(s){return new t(this,s)}}(jQuery);