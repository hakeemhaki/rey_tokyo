!function(e){"use strict";var a;e(document).on("reycore/woocommerce/init reycore/after_quickview reycore/ajax_variation_popup/after_open",(function(r,o){a||(a=!0,e(document).on("submit","form.cart",(function(a){if(e.reyHelpers.params.single_ajax_add_to_cart&&"yes"!==wc_add_to_cart_params.cart_redirect_after_add){var r=e(this),o=e(".single_add_to_cart_button:not(.disabled)",r);if(!o.parents("div.product").hasClass("product-type-external"))if(a.preventDefault(),void 0!==e.reyHelpers.params.ajaxurl&&void 0!==e.reyHelpers.params.ajax_nonce){var t=r.serialize()||"";t+="&action=reycore_ajax_add_to_cart",o.val()&&(t+="&add-to-cart="+o.val()),void 0!==e.reyHelpers.applyFilter&&(t=e.reyHelpers.applyFilter("reycore/woocommerce/addtocart_data",t)),e(document.body).trigger("adding_to_cart",[o,t]),e.ajax({type:"POST",url:e.reyHelpers.params.ajaxurl,dataType:"json",data:t,beforeSend:function(a){e(".woocommerce-error",r).remove(),o.removeClass("added").addClass("loading")},success:function(a){if(a)if(void 0===a.success||!1!==a.success){var t=window.location.toString();if(t=t.replace("add-to-cart","added-to-cart"),a.error&&a.product_url)window.location=a.product_url;else if("yes"!==wc_add_to_cart_params.cart_redirect_after_add)if("checkout"!==e.reyHelpers.params.after_add_to_cart){o.removeClass("loading");var d=a.fragments;d&&e.each(d,(function(a){e(a).addClass("updating")})),d&&e.each(d,(function(a,r){e(a).replaceWith(r)})),void 0!==a.notices&&""!==a.notices&&a.notices.indexOf("error")>0?(r.prepend(a.notices),o.addClass("not-added")):(o.addClass("added"),e(document.body).trigger("added_to_cart",[d,a.cart_hash,o])),e(document).trigger("reycore/woocommerce/after_added_to_cart",[a])}else window.location=e.reyHelpers.params.checkout_url;else window.location=wc_add_to_cart_params.cart_url}else console.warn(a.data)},error:function(){console.warn("Ajax add to cart error!")}})}else console.warn("Ajax url undefined")}})))}))}(jQuery);