!function(e){"use strict";var t=function(t,i){this.ps_active_index=0,this.ps_gallery_items=[],this.active_main_image=0,this.loading_class="--is-loading",this.items=".woocommerce-product-gallery__image",this.cached_galleries={desktop:{},mobile:{}},this.initial_gallery_html={desktop:"",mobile:""},this.$gallery=t,this.$gallery.length&&(this.init=function(){if(!this.$gallery.hasClass("--init")){this.$gallery.addClass("--init");var t=JSON.parse(this.$gallery.attr("data-params")||"{}");e.each(t,(function(i,a){void 0!==e.reyHelpers.params[i]&&(t[i]=e.reyHelpers.params[i])})),this.params=t,this.options=e.extend({zoom_enabled:void 0!==e.fn.zoom&&"undefined"!=typeof wc_single_product_params&&void 0!==wc_single_product_params.zoom_enabled&&wc_single_product_params.zoom_enabled,ps_enabled:"undefined"!=typeof PhotoSwipe&&("undefined"==typeof wc_single_product_params||void 0===wc_single_product_params.photoswipe_enabled||wc_single_product_params.photoswipe_enabled),quickview:!1,enable_thumbs:this.params.gallery__enable_thumbs,thumbsLayout:this.params.active_gallery_type},i||{}),this.$container=this.$gallery.closest("div.product"),this.$items=e(this.items,this.$gallery),this.$form=e("form.variations_form",this.$container),this.isSimpleProduct=0===this.$form.length,this.$attributeFields=e(".variations select",this.$form),this.useVariationAjax="false"===this.$form.attr("data-product_variations"),this.$gallery.length&&(this.initial_gallery_html.desktop=this.$gallery.prop("outerHTML"),this.$items.length?(this.chosenAttributes=this.get_chosen_attributes(),this.should_wait_defaults=this.chosenAttributes.count===this.chosenAttributes.chosenCount&&0!==this.chosenAttributes.count,this.options.quickview||this.mobileGallery.init(this),this.events(),this.refresh()):this.remove_loading())}},this.refresh=function(){var t=this;this.$gallery=e(".woocommerce-product-gallery",this.$container),this.$items=e(this.items,this.$gallery),this.prepare_items();var i=function(i){t.options.enable_thumbs&&Object.create(t.galleryThumbs).init(t);e(document).trigger("reycore/woocommerce/gallery_loaded",[t.$gallery,t.$items]),t.params.gallery__enable_animations&&t.animate_images(t.$gallery),e.reyHelpers.is_edit_mode&&(i=!0),(i||t.isSimpleProduct)&&t.remove_loading()};if(this.should_delay_loading=this.should_wait_defaults&&!this.isSimpleProduct,this.should_delay_loading){if(i(),this.should_wait_defaults=!1,!e.reyHelpers.params.module_extra_variation_images){var a=function(e){t.remove_loading(),t.should_delay_loading=!1};e("body.--not-ready").length?a():e(".woocommerce-product-gallery__image:first-child .wp-post-image",this.$gallery).one("load",a)}}else this.$gallery.imagesLoaded(i(!0))},this.add_loading=function(){this.$gallery.addClass(this.loading_class),e.reyHelpers.is_desktop||e(".woocommerce-product-gallery__mobile, .woocommerce-product-gallery__mobile-thumbs").addClass("--loading")},this.remove_loading=function(){this.$gallery.removeClass(this.loading_class)},this.events=function(){var t=this;e(document).on("reycore/woocommerce/gallery_loaded",(function(i,a,r){var s=t.params.active_gallery_type;if("cascade"===s&&t.params.cascade_bullets?t.cascadeProductGalleryNav(a,r):"grid"!==s&&"cascade-grid"!==s||a.removeClass("--odd --even").addClass(r.length%2?"--odd":"--even"),t.addVideoButton(),t.start360(),t.params.gallery_should_min_height){var o=e(".woocommerce-product-gallery__wrapper",t.$gallery);o.css("min-height",e(".woocommerce-product-gallery__image:first-child a *:first-child",o).height())}})),this.$form.on("found_variation wvs_single_attribute_chosen",(function(e,i){t.change_variation_images(i)&&t.prepare_items()})),this.$form.on("click",".reset_variations",(function(){t.add_loading(),t.reset_gallery()})),this.$form.on("reset_data",(function(){e.reyHelpers.params.module_extra_variation_images&&t.should_delay_loading&&t.remove_loading()})),e(document).on("reycore/woocommerce/product_gallery/reset_gallery",(function(i,a){if(e.reyHelpers.is_desktop&&(t.options.quickview||!e(".rey-quickviewPanel.--is-visible").length)){a||(a=t.initial_gallery_html.desktop);var r=e(a);t.$gallery.html(r.html()),t.refresh()}})),this.$container.on("click",".woocommerce-product-gallery__wrapper > "+this.items+" > a",(function(i){if(i.preventDefault(),!e(this).is("[data-reymodal]")&&!e(this).closest(".woocommerce-product-gallery__thumbs").length&&t.options.ps_enabled){var a=e(this).parent().index();t.options.enable_thumbs&&(a=t.ps_active_index),t.product_gallery_open_photoswipe(t.ps_gallery_items,a)}}))},this.get_cached_gallery=function(t){var i=this,a=e.reyHelpers.is_desktop?"desktop":"mobile",r=this.cached_galleries[a][t];return!!r&&(this.add_loading(),setTimeout((function(){i.reset_gallery(r)}),500),!0)},this.set_cached_gallery=function(t,i){var a=e.reyHelpers.is_desktop?"desktop":"mobile";this.cached_galleries[a][t]=i},this.change_variation_images=function(t){var i=this,a=[];if(!this.get_cached_gallery(t.variation_id)){if(a.push(t.image_id),t.extra_images){var r=t.extra_images.split(",");e.each(r,(function(e,i){i!=t.image_id&&a.push(i)}))}return 1==a.length&&void 0!==t.parent_product_image_id&&parseInt(t.parent_product_image_id)==a[0]?(this.active_main_image[0]!=parseInt(t.parent_product_image_id)&&(this.add_loading(),setTimeout((function(){i.reset_gallery(),i.active_main_image=a}),500)),!1):(this.active_main_image=a,a.length>1?(this.add_loading(),e.ajax({method:"get",url:e.reyHelpers.params.ajaxurl,dataType:"html",data:{action:"rey_frontend_get_extra_variation_images",security:e.reyHelpers.params.ajax_nonce,image_ids:a,type:e.reyHelpers.is_desktop?"desktop":"mobile",product_id:i.$form.attr("data-product_id")||0,gallery_type:this.params.active_gallery_type},error:function(e,t,i){console.error(e),console.error(t),console.error(i)}}).then((function(e,a,r){if("success"!==a)return console.error("Failed request!"),!1;var s=JSON.parse(e)||{data:!1};if(!s.data)return console.error("Empty response!"),!1;i.set_cached_gallery(t.variation_id,s.data),i.reset_gallery(s.data)})),!1):1==a.length?e.reyHelpers.params.module_extra_variation_images?(e.reyHelpers.is_desktop&&t.gallery_html?s=t.gallery_html:!e.reyHelpers.is_desktop&&t.gallery_html_mobile&&(s=t.gallery_html_mobile),s&&this.reset_gallery(s),!1):(this.should_delay_loading||this.remove_loading(),this.ps_change_first_image(),!1):(this.reset_gallery(),!1));var s}i.active_main_image=[t.image_id]},this.reset_gallery=function(t){e(document).trigger("reycore/woocommerce/product_gallery/reset_gallery",[t])},this.addSvgIcon=function(t,i,a){var r="#";reyCoreParams.svg_icons_version&&(r="?"+reyCoreParams.svg_icons_version+r);var s=e.reyHelpers.params.icons_path+r+t;return i&&("reycore"===i?s=reyCoreParams.icons_path+r+t:"social"===i&&(s=reyCoreParams.social_icons_path+r+t)),'<svg class="rey-icon '+a+'"><use href="'+(s=e.reyHelpers.applyFilter("reycore/reycore/svg_icon",s,t,i,e.reyHelpers.params.icons_path))+'" xlink:href="'+s+'"></use></svg>'},this.prepare_items=function(){var t=this;this.ps_active_index=0,this.ps_gallery_items=[],this.options.ps_enabled&&e(".woocommerce-product-gallery__trigger",this.$gallery).remove(),this.$items.each((function(i,a){var r=e(a),s=r.children("a"),o=s.children();if(!s.is("[data-reymodal]")){if(s.attr("data-elementor-open-lightbox","no"),t.params.product_page_gallery_open&&t.options.ps_enabled&&!e(".rey-openBtn",r).length){var l="",n="";t.params.product_page_gallery_open_hover&&(n+="--has-text",l+='<span class="rey-openBtn-content">'+t.params.product_page_gallery_open_text+"</span>"),""!==t.params.product_page_gallery_open_icon&&(n+=" --has-icon",l+=t.addSvgIcon(t.params.product_page_gallery_open_icon,"reycore")),e('<span class="rey-openBtn '+n+'" title="'+t.params.product_page_gallery_open_text+'">'+l+"</span>").insertAfter(o)}if(o.length&&t.options.ps_enabled){var c=t.ps_gallery_items.map((function(e){return e.src})),h=o.attr("data-large_image")||"";if(0===c.indexOf(h))return;var m={src:h,w:o.attr("data-large_image_width"),h:o.attr("data-large_image_height"),title:o.attr("data-caption")?o.attr("data-caption"):o.attr("title")};t.ps_gallery_items.push(m)}t.make_zoom(r)}}))},this.ps_change_first_image=function(){var t=e(".woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image:first-child",this.$gallery),i=e("a img, a picture",t);if(i.length||(i=e(".wp-post-image",t)),i.length){var a=this;i.one("load",(function(e){var t=i.attr("data-large_image")||"";if(""!==t){var r={src:t,w:i.attr("data-large_image_width"),h:i.attr("data-large_image_height"),title:i.attr("data-caption")?i.attr("data-caption"):i.attr("title")};Object.keys(a.ps_gallery_items).length&&(a.ps_gallery_items[0]=r),a.make_zoom(!1)}}))}},this.make_zoom=function(t){var i=t||this.$items.first(),a=e("a img",i),r=a.attr("data-large_image_width"),s=!1;if(!this.options.zoom_enabled||!e.reyHelpers.is_desktop)return i.trigger("zoom.destroy"),!1;if(r&&parseInt(r)>i.closest(".woocommerce-product-gallery__image").width()&&(s=!0),i.trigger("zoom.destroy"),s){var o=e.extend({touch:!1},wc_single_product_params.zoom_options||{});"ontouchstart"in document.documentElement&&(o.on="click"),o.target&&(o.target=e(o.target,i),o.url=a.attr("data-large_image")),i.zoom(o),i.trigger("woocommerce_gallery_init_zoom")}},this.animate_images=function(t){this.options.quickview&&this.useVariationAjax?e(".--animated-entry",t).addClass("--animated-in"):"undefined"!=typeof ScrollOut?setTimeout((function(){ScrollOut({targets:t[0].querySelectorAll(".--animated-entry"),once:!0,onShown:function(t,i,a){e(t).addClass("--animated-in").css("transition-delay",.05*i.index+"s")}})}),10):e(".--animated-entry",t).addClass("--animated-in")},this.get_chosen_attributes=function(){var t={},i=0,a=0;return this.$attributeFields.each((function(){var r=e(this).data("attribute_name")||e(this).attr("name"),s=e(this).val()||"";s.length>0&&a++,i++,t[r]=s})),{count:i,chosenCount:a,data:t}},this.galleryThumbs={init:function(t){this.$pg=t,this.items=this.$pg.items,this.$gallery=this.$pg.$gallery,this.$target=e(this.$pg.$items).first(),this.large_width=e("a img",this.$target).attr("data-large_image_width"),this.large_width||(this.large_width=e(".wp-post-image:first-of-type",this.$target).attr("data-large_image_width")),this.$thumbs_gallery=e(".woocommerce-product-gallery__thumbs",this.$gallery),this.$thumbs_gallery.length&&(this.$pg.options.quickview||this.$pg.params.gallery_thumb_gallery_slider||this.$thumbs_gallery.addClass("--prevent-slider"),e(this.items,this.$thumbs_gallery).first().addClass("--is-active"),e.reyHelpers.is_desktop&&(this.$thumbsCarousel=Object.create(this._thumbsCarousel),this.$thumbsCarousel.init(this.$gallery,this.$pg)),this.addArrowsNav(),this.events())},events:function(){var t=this,i=".woocommerce-product-gallery__thumbs "+this.items+" > a";this.$pg.$container.on(this.$pg.params.gallery_thumb_event,i,(function(i){i.preventDefault();var a=e(i.currentTarget);e(t.items).removeClass("--is-active"),a.parent().addClass("--is-active"),t.$gallery.addClass("--loading-main"),t.$pg.ps_active_index=a.parent().index();var r=a.children("img, picture"),s=e("a > img",t.$target);r.length||(r=e(".wp-post-image, picture",a));var o=r.attr("data-large_image")||r.attr("data-preview-src")||r.attr("data-src");t.large_width=r.attr("data-large_image_width"),e("a",t.$target).attr("href",o);var l=function(){t.$gallery.removeClass("--loading-main"),t.$gallery.trigger("reycore/product_gallery/loaded_main_image",[a])},n={src:r.attr("data-preview-src")||o,srcset:r.attr("data-preview-srcset")||"",sizes:r.attr("data-preview-sizes"),title:r.attr("title"),"data-caption":r.attr("data-caption"),"data-large_image":o,"data-src":o,"data-large_image_width":t.large_width,"data-large_image_height":r.attr("data-large_image_height")};s.length||(s=e("a .wp-post-image",t.$target)),s.is("picture")?e("source, img",s).one("load",l).attr(n):s.one("load",l).attr(n),t.$pg.make_zoom()})),"mouseenter"===this.$pg.params.gallery_thumb_event&&this.$pg.$container.on("click",i,(function(e){e.preventDefault()})),e(window).on("resize",e.reyHelpers.debounce((function(){t.$pg.make_zoom()}),300))},addArrowsNav:function(){var t=this;if(this.$pg.params.product_page_gallery_arrows&&this.$pg.$items.length>1)var i=setInterval((function(){if(void 0!==e.reyCore){var a,r;clearInterval(i);var s=e.reyCore.getSvgArrows();if(s)a=s.prev,r=s.next,e('<div class="rey-mainImage-nav">'+a+r+"</div>").appendTo(t.$target).children().on("click",(function(i){i.preventDefault();var a,r=e(this),s=r.hasClass("rey-arrowSvg--left"),o=t.$pg.ps_active_index,l=t.$pg.$items.length-1;r.removeClass("--end"),r.siblings().removeClass("--end"),s?0===(a=0===o?0:o-1)&&r.addClass("--end"):(a=o===l?o:o+1)===l-1&&r.addClass("--end"),e(t.items+":nth-child("+(a+1)+") a",t.$thumbs_gallery).trigger(t.$pg.params.gallery_thumb_event)}))}}),500)},_thumbsCarousel:{vals:{vertical:{size:"height",oSize:"outerHeight"},horizontal:{size:"width",oSize:"outerWidth"}},$slider:!1,init:function(t,i){this.$pg=i,this.options=i.options,this.isVertical="vertical"===this.options.thumbsLayout,this.$gallery=t,this.$tGallery=e(".woocommerce-product-gallery__thumbs",this.$gallery),this.$tGallery.hasClass("--prevent-slider")||(this.$items=e(".woocommerce-product-gallery__image",this.$tGallery),this.$tGallery.addClass("splide"),this.$items.addClass("splide__slide"),this.count=this.$items.length,this.quickviewGallery=this.options.thumbsLayout,this.quickviewGalleryBullets="bullets"===this.quickviewGallery,this.quickviewGalleryBullets||(this.config=this.vals[this.options.thumbsLayout],this.itemSize=this.$items.first()[this.config.oSize](!0),this.$mainImg=e(".woocommerce-product-gallery__image .wp-post-image",this.$gallery).first()),this.options.quickview&&this.$tGallery.addClass("--qv-gallery-"+this.options.thumbsLayout),this.getVars(),this.resizeGallery_customHeight(),this.events(),this.makeCarousel())},getVars:function(){this.quickviewGalleryBullets||(this.$pg.params.product_page_gallery_max_thumbs&&0!=this.$pg.params.product_page_gallery_max_thumbs?this.slidesToShow=parseInt(this.$pg.params.product_page_gallery_max_thumbs):(this.gallerySize=this.$mainImg[this.config.size](),this.options.quickview&&(this.gallerySize-=80),this.slidesToShow=Math.floor(this.gallerySize/this.itemSize)))},events:function(){if(!this.quickviewGalleryBullets){var t=this;this.$gallery.on("reycore/product_gallery/loaded_main_image",(function(e,i){t.refresh()})),e(window).on("resize",e.reyHelpers.debounce((function(){t.refresh()}),500)),this.$mainImg.on("jetpack-lazy-loaded-image",(function(){var e=setInterval((function(){0===t.slidesToShow?(t.refresh(),t.makeCarousel()):clearInterval(e)}),500)}))}},refresh:function(){this.resizeGallery_customHeight(),this.getVars()},resizeGallery_customHeight:function(){if(!this.quickviewGallery&&!this.quickviewGalleryBullets){this.$gallery.closest(".rey-product");var t=e("body.--gallery-vertical").length,i=e("body.--gallery-horizontal").length;if(e("body.single-skin--fullscreen").length&&(t||i)){var a=e(".woocommerce-product-gallery__wrapper",this.$gallery),r=e("> .woocommerce-product-gallery__image",a),s=e(".woocommerce-product-gallery__thumbs",a);r.css("max-height",""),s.css("max-height","");var o=e("img, picture",r).height();if(!(o<=0)&&(i&&s.length&&(o-=s.outerHeight(!0)),a.css("max-height",a.height()),r.css("max-height",o),s.css("max-height",o),i)){var l=e("img, picture",r).width();s.css("max-width",l)}}}},makeCarousel:function(){if(!this.quickviewGalleryBullets&&!(e.reyCore&&void 0===e.reyCore.addSvgIcon||this.$slider||this.slidesToShow<2)){var t=this.$items.length>this.slidesToShow,i={perPage:this.slidesToShow,type:"slide",rewind:!0,speed:300,arrows:!1,pagination:!1};if(this.isVertical)i.direction="ttb",i.autoHeight=!0,i.height=this.slidesToShow*this.$items.first().outerHeight();else if(i.autoWidth=!0,!t)return void this.$tGallery.addClass("--center-thumbs");if(t){this.$tGallery.addClass("--has-arrows"),"edges"===this.$pg.params.product_page_gallery_thumbs_nav_style&&(i.perPage-=1);var a=this,r=setInterval((function(){if(void 0!==e.reyCore){clearInterval(r);var t=e.reyCore.addSvgIcon("reycore-icon-arrow","reycore");e('<div class="woocommerce-product-gallery__thumbsNav">'+('<span class="woocommerce-product-gallery__thumbsPrev" data-dir="-1">'+t+"</span>")+('<span class="woocommerce-product-gallery__thumbsNext" data-dir="+1">'+t+"</span>")+"</div>").appendTo(a.$tGallery)}}),500)}this.$slider=e.reySplide({element:this.$tGallery[0],config:i,delay:500,customArrows:!!t&&".woocommerce-product-gallery__thumbsNav"})}}}},this.cascadeProductGalleryNav=function(t,i){if(!t.closest(".rey-quickviewPanel").length){t.next(".rey-cascadeNav-wrapper").length&&t.next(".rey-cascadeNav-wrapper").remove();var a=t.closest(".elementor-widget-container").length,r='<div class="rey-cascadeNav-wrapper"><div class="rey-cascadeNav">';i.each((function(e,t){r+='<div class="rey-cascadeNav-item '+(0===e?"--active":"")+'" data-index="'+e+'"></div>'}));var s,o,l=[],n=e(r+="</div></div>").insertAfter(t),c=e(".rey-cascadeNav-item",n),h=function(e){c.removeClass("--active"),c.eq(e).addClass("--active")},m=function(){s=window.innerHeight/2,i.each((function(e,t){l[e]={top:t.offsetTop,height:t.offsetHeight}})),o=t.height(),a&&e(".rey-cascadeNav-wrapper").css("left",t.offset().left+t.width()+40),n.toggleClass("--hidden",(window.pageYOffset||document.documentElement.scrollTop)+s>o)};m(),e(window).on("resize",e.reyHelpers.debounce((function(){m()}),500)).on("scroll",(function(){var t=(window.pageYOffset||document.documentElement.scrollTop)+s;e.each(l,(function(e,i){t>i.top&&t<i.top+i.height&&h(e)})),n.toggleClass("--hidden",t>o)})),c.on("click",(function(t){var a=e(this).attr("data-index");e("html, body").animate({scrollTop:i.eq(a).offset().top},500),h(a)}))}},this.addVideoButton=function(){var e=this.$gallery.prevAll(".rey-singlePlayVideo").detach().appendTo(this.$items.eq(0)).removeClass("d-none");void 0!==this.mobileGallery.$mobile_gallery&&e.clone().appendTo(this.mobileGallery.$mobile_gallery)},this.product_gallery_open_photoswipe=function(t,i){if(this.options.ps_enabled&&"undefined"!=typeof PhotoSwipe)if(e.isEmptyObject(t))console.error("Empty array of items");else{var a=e(".pswp");if(a.length){e(".woocommerce-product-gallery.--fix-360-ps-index").length&&i>0&&(i-=1);var r=e.extend(wc_single_product_params.photoswipe_options||{},{index:parseInt(i)||0,mainClass:e.reyHelpers.params.js_params.photoswipe_light?"--theme-light":"",preloaderEl:!0});new PhotoSwipe(a[0],PhotoSwipeUI_Default,t,r).init()}}},this.mobileGallery={$mobile_slider:!1,$mobile_thumbs_slider:!1,ps_images:[],init:function(t){this.app=t,this.use_thumbs="thumbs"===this.app.params.product_page_mobile_gallery_nav,this.thumbs_count=this.app.params.product_page_mobile_gallery_nav_thumbs||4,this.arrows=this.app.params.product_page_mobile_gallery_arrows,this.$mobile_gallery=e(".woocommerce-product-gallery__mobile"),this.$mobile_gallery.length&&(this.$images=e(".woocommerce-product-gallery__mobile-img",this.$mobile_gallery),this.app.initial_gallery_html.mobile=this.$mobile_gallery.prop("outerHTML"),this.make_gallery(),this.events(),this.app.start360__mobile())},events:function(){var t=this;this.app.$form.on("found_variation",(function(i,a){if(e.reyHelpers.is_desktop){if(e.reyHelpers.params.js_params.scroll_top_after_variation_change_desktop){var r=e(".woocommerce-product-gallery.woocommerce-product-gallery--with-images");r.length&&e("html, body").animate({scrollTop:r.offset().top-15},500)}}else{e.reyHelpers.params.js_params.scroll_top_after_variation_change&&function(){e(this).hasClass("--prevent-scroll-to-gallery")||(e("html, body").animate({scrollTop:t.$mobile_gallery.offset().top-15},500),t.$mobile_slider.slider&&t.$mobile_slider.slider.go(0))}()}void 0!==a.image.src&&""!=a.image.src&&(t.$images.eq(0).attr("src",a.image.src),e(".woocommerce-product-gallery__mobile-thumbs .woocommerce-product-gallery__mobile--0").attr("src",a.image.src),t.ps_images.length&&(t.ps_images[0].src=a.image.src,t.ps_images[0].w=a.image.src_w,t.ps_images[0].h=a.image.src_h))})),e(window).on("resize",e.reyHelpers.debounce((function(){!t.$mobile_slider&&t.$images.length>1&&!e.reyHelpers.is_desktop&&t.make_gallery()}),500)),e(document).on("reycore/woocommerce/product_gallery/reset_gallery",(function(i,a){e.reyHelpers.is_desktop||(a||(a=t.app.initial_gallery_html.mobile),e(".woocommerce-product-gallery__mobileWrapper").html(a),t.make_gallery())}))},make_gallery:function(){var t=this;if(!e.reyHelpers.is_desktop){if(this.ps_images=[],this.$mobile_gallery=e(".woocommerce-product-gallery__mobile"),this.should_make_thumbs_slider=this.use_thumbs&&e(".woocommerce-product-gallery__mobile-img",this.$mobile_gallery).length>1,this.sliderConfig=JSON.parse(this.$mobile_gallery.attr("data-slider-config")||"{}"),this.should_make_thumbs_slider&&(this.$mobile_thumbs_gallery=e(".woocommerce-product-gallery__mobile-thumbs"),e.reyHelpers.setProperty("--woocommerce-prod-gallery-thumbs-count",this.thumbs_count,this.$mobile_thumbs_gallery[0]),this.$mobile_thumbs_gallery.addClass("--slider")),this.$images=e(".woocommerce-product-gallery__mobile-img",this.$mobile_gallery),this.$images.each((function(i,a){var r=e(a),s=JSON.parse(r.attr("data-full")||"{}"),o=r.attr("title")||"";r.closest(".rey-galleryPlayVideo").is("[data-reymodal]")||s.length&&t.ps_images.push({src:s[0],w:s[1],h:s[2],title:o})})),this.$images.on("click",(function(i){if(i.preventDefault(),!e.reyHelpers.is_desktop&&!e(this).closest(".rey-galleryPlayVideo").is("[data-reymodal]")){var a=t.$mobile_slider.slider?t.$mobile_slider.slider.index:0;t.app.product_gallery_open_photoswipe(t.ps_images,a)}})),!(!this.app.should_wait_defaults||this.app.isSimpleProduct))return this.should_wait_defaults=!1,void this.runMobileGallery();this.$mobile_gallery.imagesLoaded((function(){t.runMobileGallery()}))}},runMobileGallery:function(){this.app.params.gallery_should_min_height&&this.$mobile_gallery&&this.$mobile_gallery.css("min-height",e(".woocommerce-product-gallery__mobile--0",this.$mobile_gallery).height()),this.$images.length?(this.should_make_thumbs_slider&&(this.$mobile_thumbs_slider=e.reySplide({element:this.$mobile_thumbs_gallery[0],config:{type:"slide",rewind:!0,perPage:parseInt(this.thumbs_count),autoplay:!1,lazyLoad:!0,arrows:!1,pagination:!1,isNavigation:!0,gap:10}})),this.$mobile_slider=e.reySplide({element:this.$mobile_gallery[0],config:{type:"slide",rewind:!0,perPage:1,autoplay:!1,lazyLoad:!0,arrows:!1,pagination:!1,speed:500,autoWidth:!0},customArrows:!!this.sliderConfig.arrows&&this.sliderConfig.arrows,customPagination:!!this.sliderConfig.pagination&&this.sliderConfig.pagination,animateHeight:!0,mount:!this.should_make_thumbs_slider}),this.should_make_thumbs_slider&&this.$mobile_thumbs_slider.slider&&(this.$mobile_slider.slider.sync(this.$mobile_thumbs_slider.slider).mount(),this.$mobile_thumbs_slider.$element&&e(".rey-galleryPlayVideo",this.$mobile_thumbs_slider.$element).removeAttr("data-reymodal")),this.remove_loading()):this.remove_loading()},remove_loading:function(){this.$mobile_gallery.removeClass("--loading")},add_loading:function(){this.$mobile_gallery.addClass("--loading")}},this.start360=function(){if(e.reyHelpers.is_desktop){var t=e(".rey-360image"),i=e(".woocommerce-product-gallery.--gallery-thumbs").length,a=e(".woocommerce-product-gallery.--activate-360").length||e(".woocommerce-product-gallery.--activate-on-load").length;if(t.length){var r=function(){if(i){var a=e(".woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image:first-child a img:first-child").width();t.css({"min-width":a,"min-height":a})}};r(),e(window).on("resize",e.reyHelpers.debounce((function(){r()}),500)),a&&window.CI360.init(),e(".woocommerce-product-gallery__thumbs .woocommerce-product-gallery__image").on("click",(function(i){var r=e(".woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image:first-child");a&&e(".woocommerce-product-gallery.--activate-360").removeClass("--activate-360"),e(this).hasClass("--is-360")?(r.hide(),t.addClass("--visible"),window.CI360.init()):t.hasClass("--visible")&&(r.show(),t.removeClass("--visible"),window.CI360.destroy())}))}}},this.start360__mobile=function(){if(!e.reyHelpers.is_desktop){var t=e(".rey-360image-mobile");t.length&&(e(".woocommerce-product-gallery__mobile .woocommerce-product-gallery__image.--is-360").on("click",(function(e){t.addClass("--visible"),window.CI360.init()})),e(".rey-360image-mobileClose").on("click",(function(e){e.preventDefault(),t.removeClass("--visible"),window.CI360.destroy()})))}},this.init())};e.fn.rey_product_gallery=function(e){return new t(this,e),this},e(window).on("elementor/frontend/init elementor/frontend/ajax",(function(){var e=function(e,t){t(".woocommerce-product-gallery",e).rey_product_gallery()};elementorFrontend.hooks.addAction("frontend/element_ready/woocommerce-product-images.default",e),elementorFrontend.hooks.addAction("frontend/element_ready/reycore-woo-pdp-gallery.default",e)})),e(document).one("reycore/woocommerce/init",(function(t){e(".single-product .woocommerce-product-gallery").each((function(){e(this).rey_product_gallery()}))})),e(document).on("reycore/after_quickview",(function(t,i){e(".woocommerce-product-gallery",e(i)).rey_product_gallery({zoom_enabled:!1,ps_enabled:!1,enable_thumbs:!0,thumbsLayout:e.reyHelpers.params.quickview_gallery_type||"vertical",quickview:!0})}))}(jQuery);