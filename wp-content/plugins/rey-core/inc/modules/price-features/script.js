!function(t){"use strict";var e=function(e){this.init=function(){this.decimal=t.reyHelpers.params.price_decimal_separator,this.thousand=t.reyHelpers.params.price_thousand_separator,this.precision=t.reyHelpers.params.price_decimal_precision,this.$pContainer=e,this.$variationForm=t("form.variations_form",this.$pContainer),this.$qtyContainer=this.$variationForm.length?this.$variationForm:t("form.cart",this.$pContainer),this.$mainPrice=t("p.price",this.$pContainer),this.mainPriceHtml=this.$mainPrice.html(),this.$mainPrice.length&&(this.changeMainPrice(),this.changePriceWithTotal(),this.changeInstalments())},this.changeMainPrice=function(){if(reycorePriceFeaturesParams.variation_price_to_main){var e=this;this.$variationForm.on("found_variation",(function(i,a){if(a.price_html){var r=t(a.price_html);r.is("span.price")&&(r=r.html()),e.$mainPrice.empty().html(r)}})).on("reset_data",(function(){e.$mainPrice.empty().html(e.mainPriceHtml)}))}},this.changePriceWithTotal=function(){if(reycorePriceFeaturesParams.price_show_total){var e=this;this.$variationForm.on("found_variation",(function(t,i){e.changeTotal()})).on("reset_data",(function(){e.changeTotal()})),t(document).on("change",".rey-product .quantity .qty",(function(i){var a=t(this);a.hasClass("--disabled")||a.closest(".product.product-type-grouped").length||e.changeTotal()}))}},this.changeTotal=function(){t(".rey-totalPrice",this.$pContainer).remove();var e=t(".quantity .qty",this.$qtyContainer);if(1!==(parseFloat(e.val())||1)){var i=this.$mainPrice,a=t(".woocommerce-variation .woocommerce-variation-price span.price",this.$pContainer);!reycorePriceFeaturesParams.variation_price_to_main&&a.length&&(i=a);var r=t("ins",i),n=r.length?r:i,s=wNumb({mark:this.decimal,thousand:this.thousand,decimals:this.precision}),o=this.cleanText(n),c=s.from(o);if(c&&!isNaN(c)){var m=t.reyHelpers.params.price_format.replace("{{price}}",s.to(c*e.val()));t('<p class="rey-totalPrice"><span class="__total-price-text">'+t.reyHelpers.params.total_text+'</span> <span class="woocommerce-Price-amount">'+m+"</span></p>").insertAfter(this.$mainPrice)}}},this.changeInstalments=function(){if(reycorePriceFeaturesParams.price_instalments){var e=this;this.$variationForm.length||this.addInstalments(),this.$variationForm.on("found_variation",(function(t,i){e.addInstalments()})).on("reset_data",(function(){e.addInstalments()})),t(document).on("change",".rey-product .quantity .qty",(function(i){var a=t(this);a.hasClass("--disabled")||a.closest(".product.product-type-grouped").length||e.addInstalments()}))}},this.addInstalments=function(){t(".rey-instalmentsPrice",this.$pContainer).remove();var e=t(".quantity .qty",this.$qtyContainer),i=parseFloat(e.val())||1,a=this.$mainPrice,r=t(".woocommerce-variation .woocommerce-variation-price span.price",this.$pContainer);!reycorePriceFeaturesParams.variation_price_to_main&&r.length&&(a=r);var n=t("ins",a),s=n.length?n:a,o=wNumb({mark:this.decimal,thousand:this.thousand,decimals:this.precision}),c=this.cleanText(s),m=o.from(c);if(m&&!isNaN(m)){var h=parseInt(reycorePriceFeaturesParams.price_instalments_number),p=t.reyHelpers.applyFilter("reycore/price_features/installments/calculation",m/h*i,m,h,i),l=o.to(p),u="<strong>"+t.reyHelpers.params.price_format.replace("{{price}}",l)+"</strong>",d="<strong>"+h+"</strong>",y=reycorePriceFeaturesParams.price_instalments_text.replace("%p",u).replace("%i",d);t('<p class="rey-instalmentsPrice">'+y+"</p>").insertAfter(this.$mainPrice)}},this.cleanText=function(e){var i=e.clone();return t(".rey-discount",i).remove(),i.text()},this.init()};t(document).one("reycore/init",(function(){new e(t('div.rey-product, div[data-elementor-type="product"]'))}))}(jQuery);