!function(t){"use strict";var i=function(i){this.init=function(){this.$pContainer=i,this.$variationForm=t("form.variations_form",this.$pContainer),this.isVariableProduct=this.$variationForm.length,this.$form=this.isVariableProduct?this.$variationForm:t("form.cart",this.$pContainer),this.$btnPrice=t("#rey-price-in-atc",this.$pContainer),this.mainPriceHtml=this.$btnPrice.html(),this.variationPriceHtml="",this.othersPriceHtml="",this.qty=1,this.numberFormat=wNumb({mark:t.reyHelpers.params.price_decimal_separator,thousand:t.reyHelpers.params.price_thousand_separator,decimals:t.reyHelpers.params.price_decimal_precision}),this.$btnPrice.length&&this.events()},this.events=function(){var i=this;this.$form.on("found_variation",(function(t,r){r.price_html&&(i.variationPriceHtml=r.price_html,i.calcTotal())})).on("reset_data",(function(){i.variationPriceHtml="",i.$btnPrice.empty().html(i.mainPriceHtml)})),this.$form.on("rightpress_live_product_update_trigger",(function(r){var e=t(".rightpress_product_price_live_update .price");e.length&&(i.othersPriceHtml=e.html(),i.calcTotal())})),t(document).on("change",".rey-product .quantity .qty",(function(r){var e=t(this);e.hasClass("--disabled")||e.closest(".product.product-type-grouped").length||i.isVariableProduct&&t(".wc-variation-selection-needed",i.$form).length||(i.qty=parseFloat(e.val())||1,i.calcTotal())}))},this.calcTotal=function(){var i=this.variationPriceHtml?this.variationPriceHtml:this.mainPriceHtml;this.othersPriceHtml&&(i=this.othersPriceHtml);var r=t(i),e=t("ins",r);r.length>1&&r.each((function(){t(this).is("ins")&&(e=t(this))}));var a=e.length?e:r,n=this.cleanText(a),s=this.numberFormat.from(n);if(s&&!isNaN(s)){var o=t.reyHelpers.params.price_format.replace("{{price}}",this.numberFormat.to(s*this.qty));this.$btnPrice.empty().html(o)}},this.cleanText=function(i){var r=i.clone();return t(".rey-discount",r).remove(),r.text()},this.init()};t(document).on("reycore/init",(function(){new i(t("div.rey-product"))}))}(jQuery);