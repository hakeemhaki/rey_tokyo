!function(e){"use strict";var i={running:!1,pid:!1,init:function(){this.running||(this.$app=e.reyThemeWooCommerce,this.setupPanel(),this.$panel.length&&(this.$panelContainer=e(".rey-quickview-container",this.$panel),this.events(),this.running=!0))},setupPanel:function(){this.$panel||(this._panel="#js-rey-quickviewPanel",this.$panel=e(this._panel))},events:function(){var i=this,n=function(n){if(e.reyHelpers.is_desktop){n.preventDefault();var t=e(this).attr("data-id")||e(this).closest(".rey-productInner").attr("data-id");t&&(e.reyHelpers.overlay("site","open"),i.open(t))}};e(document).on("click",".js-rey-quickviewBtn",n),e.reyHelpers.params.quickview_only&&(e(document).on("click","li.product .woocommerce-loop-product__link",n),e(document).on("click","li.product .woocommerce-loop-product__title a",n),e(document).on("click","li.product .rey-productSlideshow a",n)),this.$panel.on("click",".rey-postNav .nav-links > div > a",(function(n){n.preventDefault();var t=e(this).children(".rey-productNav__meta").attr("data-id");t&&i.open(t)})),this.$panel.on("click",".js-rey-quickviewPanel-close",(function(e){e.preventDefault(),i.close()})),e(document).on("keyup",(function(e){27==e.keyCode&&i.close()})),void 0!==e.reyTheme&&e.reyTheme.elements.$site_overlay.on("click",(function(){i.close()})),e(document).on("reycore/after_quickview_effect",(function(n,t){var r=e(t),a=i.$panel.find(".js-scrollbar");a.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(a[0]),void 0!==e.fn.wc_variation_form&&e(".variations_form",r).each((function(){e(this).wc_variation_form()}))})),e(document).on("reycore/after_quickview",(function(n,t){var r=e(t);e(".woocommerce-product-gallery",r).removeClass("woocommerce-product-gallery--vertical"),i.$panel.addClass("--is-visible").removeClass("--is-loading"),i.$app.modifyQuantityNumberField(),void 0!==e.reyTheme&&e.reyTheme.general_html(r);var a={easing:"easeInOutQuart",duration:400,complete:function(){e(document).trigger("reycore/after_quickview_effect",[r])}};if(i.$panelContainer.hasClass("--curtain"))anime.timeline(a).add({targets:i._panel+" .rey-quickview-container",scaleX:[0,1]}).add({targets:i._panel+" .rey-quickview-mask",scaleX:[1,0],delay:function(e,i){return 250*i}}).add({targets:i._panel+" .rey-productSummary",scale:[1.1,1]},"-=400");else if(i.$panelContainer.hasClass("--slide")){a.duration="600",a.easing="easeOutQuart",anime.timeline(a).add({targets:i._panel+" .rey-quickview-container",translateY:[150,0],scale:[.95,1],opacity:[0,1]})}}))},open:function(i){var n=this;void 0!==e.reyHelpers.params.ajaxurl&&void 0!==i&&""!=i?(e("body.--cart-active").length&&e(document).trigger("reycore/minicart/close",[!0]),this.pid=i,this.setupPanel(),this.$panel.addClass("--is-loading"),e("body").addClass("quickview--is-opened"),""!=e.trim(this.$panelContainer.html())&&this.cleanupPanel(),e(document).trigger("reycore/before_quickview",[i]),e.ajax({method:"post",url:e.reyHelpers.params.ajaxurl,data:{action:"get_quickview_product",id:i},success:function(i){!i||i&&!i.success?console.warn(i.data):n.assets_loaded?n.render_panel(i.data):(e.reyHelpers.getMultiStyles(reyQuickviewParams.styles),e.reyHelpers.getMultiScripts(reyQuickviewParams.scripts).done((function(){n.assets_loaded=!0,n.render_panel(i.data)})))},error:function(e,i,n){console.error(e),console.error(i),console.error(n)}})):this.close()},render_panel:function(i){var n=this.$panelContainer.html(i);e(document).trigger("reycore/after_quickview",[n])},close:function(){e.reyHelpers.overlay("site","close"),e("body").removeClass("quickview--is-opened"),this.setupPanel(),this.$panel.length&&(this.$panel.removeClass("--is-visible --is-loading"),this.cleanupPanel())},cleanupPanel:function(){this.$panelContainer.fadeOut("fast",(function(){e(this).attr("style","").children().remove()}))}};e(document).on("rey/close_panels",(function(e,n){"quickview"!==n&&i.close()})),e(document).one("reycore/init",(function(){i.init()}))}(jQuery);